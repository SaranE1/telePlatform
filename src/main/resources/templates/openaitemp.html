<!DOCTYPE html>
<html lang="en">

<head>
    <script src="D:\springFrame\startMode\src\main\resources\templates\imagein.js"></script>
</head>

<body>
    <h3>Digital Prescription</h3>

    <img id="clinicImage" src="D:\springFrame\startMode\src\main\resources\templates\clinicImage.jpg"
        style="width:50%;height:100px;">
    <form id="pdfForm">
        <label for="patientName">Patient Name:</label>
        <input type="text" id="patientName" name="patientName" placeholder=""><br><br>

        <label for="age">Age:</label>
        <input type="number" id="age" name="age" placeholder=""><br><br>

        <label for="phoneNumber">Phone Number:</label>
        <input type="tel" id="phoneNumber" name="phoneNumber" placeholder=""><br><br>

        <label for="email">Patient Mail:</label>
        <input type="email" id="email" name="email" placeholder=""><br><br>

        <label for="gender">Gender</label>
        <select name="gender" id="gender">
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="others">Others</option>
        </select><br><br>

        <label for="prescription">Prescription:</label>
        <textarea id="prescription" name="prescription" placeholder=""></textarea><br><br>

        <input type="button" value="Generate PDF" onclick="generatePdf()">
    </form>

    <script>
        function generatePdf() {
            // Show the clinic image before capturing the form
            document.getElementById('clinicImage').style.display = 'block';

            let formElement = document.getElementById('pdfForm');
            html2canvas(formElement)
            .then(function(canvas) {
                // Convert canvas to image data URL
                let imageData = canvas.toDataURL('image/jpeg');

                // Create a temporary link element to download the image
                let link = document.createElement('a');
                link.href = imageData;
                link.download = 'form_image.jpeg';
                link.click();

                // Hide the clinic image again
                document.getElementById('clinicImage').style.display = 'none';
            })
            .catch(function(error) {
                console.error('Error occurred during image capture:', error);
                // Ensure the clinic image is hidden in case of error
                document.getElementById('clinicImage').style.display = 'none';
            });
        }
    </script>
</body>

</html>
